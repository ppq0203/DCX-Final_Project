<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layout/mng/mngSubjectLayout}">

<div layout:fragment="content">

	<div class="row">
		<div class="col-12 p-5">
			<div class="row">
				<div class="col-6">
					<h2>Q&A</h2>
				</div>
				<div class="card-tools col-6 text-right">
					<button data-toggle="modal" data-target="#modal-xl" type="button" class="btn btn-primary btn-sm">
						<span>등록</span>
					</button>
				</div>
			</div>
			<!-- /.card-header -->
			<table class="table">
				<thead>
					<tr>
						<th scope="col">번호</th>
						<th scope="col">제목</th>
						<th scope="col">작성자</th>
						<th scope="col">날짜</th>
						<th scope="col">조회수</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th scope="row">1</th>
						<td><span>시험 언제 보죠?</span></td>
						<td><span>HTML</span></td>
						<td><span>2023.05.20</span></td>
						<td><span>1</span></td>
					</tr>
					<tr>
						<th scope="row"></th>
						<td><span>└> 뎃글 구현 해주세요 승주님</span></td>
						<td><span>css</span></td>
						<td><span>2023.05.20</span></td>
						<td><span>1</span></td>
					</tr>
					<tr>
						<th scope="row">2</th>
						<td><span>질문있습니다</span></td>
						<td><span>빅데이터</span></td>
						<td><span>2023.05.30</span></td>
						<td><span>1</span></td>
					</tr>
					<tr>
						<th scope="row">3</th>
						<td><span>물어볼것 있어요</span></td>
						<td><span>HTML</span></td>
						<td><span>2023.05.30</span></td>
						<td><span>1</span></td>
					</tr>
					<tr>
						<th scope="row">4</th>
						<td><span>프로젝트</span></td>
						<td><span>Java</span></td>
						<td><span>2023.05.30</span></td>
						<td><span>1</span></td>
					</tr>
				</tbody>
			</table>
			<!-- /.card-body -->
			<div class="card-footer">
			</div>
		</div>

	</div>

	<div class="row
				p-3">
		<div class="col-11"></div>
		<button type="button" class="btn btn-dark">글 쓰기</button>

	</div>

	<div class="row">
		<div class="col-5 p-3"></div>
		<nav aria-label="Page navigation example">
			<ul class="pagination">
				<li class="page-item "><a class="page-link" href="#">Previous</a></li>
				<li class="page-item "><a class="page-link" href="#">1</a></li>
				<li class="page-item "><a class="page-link" href="#">2</a></li>
				<li class="page-item "><a class="page-link" href="#">3</a></li>
				<li class="page-item "><a class="page-link" href="#">Next</a></li>
			</ul>
		</nav>
	</div>
	<!-- Modal -->
	<div class="modal fade" id="modal-xl" style="display: none;" aria-hidden="true">
		<form action="/std/qna/create" method="post">
			<div class="modal-dialog modal-dialog-cented modal-xl">
				<div class="modal-content">
					<div class="col-12 modal-header">
						<h4 class="col-12 modal-title text-center">Q&A</h4>
						<input type="hidden">
					</div>
					<div class="modal-body">
						<div class="container-fluid">
							<div class="row">
								<div class="col-sm-12">
									<div class="form-group">
										<label>과목</label>
										<select name="pkSubjectSeq" class="appendSubject">
											
										</select>
									</div>
								</div>
								<div class="col-sm-12">
									<div class="form-group">
										<label>제목</label>
										<input name="title" type="text" class="form-control">
									</div>
								</div>
								<div class="col-sm-12">
									<div class="form-group">
										<label>내용</label>
										<textarea id="summernote" name="contents" class="form-control"
											rows="6"></textarea>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer justify-content-between">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						<button type="submit" class="btn btn-primary">
							<span>등록</span>
						</button>
					</div>
				</div>
			</div>
		</form>
	</div>
	<script>
		var SUBJECT_ARRAY = [];
		function getSubject(){
			$.ajax({
				type: "POST",
				url: "/getSubject",
				dataType: "json",
				success: function (data) {
					$(".appendSubject").empty();
					$.each(data, function (i) {
						console.log(data[i]);
						$(".appendSubject").append('<option value="' + data[i].pkSubjectSeq + '">' + data[i].subjectName + '</option>');
					});
				}
			})
		};
		
		$(document).ready(function () {
			// Summernote
			$('#summernote').summernote({
				tabsize: 2,
				height: 300
			});
			
			$('.modal').on('shown.bs.modal', function (e) {
				// 모달이 열릴 때 실행되는 코드
				$(this).find('form')[0].reset(); // 입력 필드 초기화
				getSubject();
			});

			$('.modal').on('hidden.bs.modal', function (e) {
				// 모달이 닫힐 때 실행되는 코드
				$(this).find('form')[0].reset(); // 입력 필드 초기화
				$('#summernote').summernote('code', ''); // 에디터 초기화
			});
			//$.ajax({
			//	type: "POST",
			//	url: "/getSubjectList",
			//	dataType: "json",
			//	success: function (data) {
			//		$.each(data, function (index, item) {
			//			SUBJECT_ARRAY.push(
			//				{
			//					"id": item.pkSubjectSeq,
			//					"text": item.subjectName
			//				}
			//			);
			//		});
			//		$('.select2').select2({
			//			data: SUBJECT_ARRAY
			//		})
			//	},
			//	error: function () {
			//	}
			//});
		})


	</script>
	</th:block>

</html>