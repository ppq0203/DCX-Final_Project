<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layout/std/stdAiLayout}">

<th:block layout:fragment="content">
	<div class="card-header p-0 border-bottom-0">
		<ul class="nav nav-tabs" id="custom-tabs-four-tab" role="tablist">
			<li class="nav-item" th:each="item, status : ${resultList}">
				<a class="nav-link" th:text="${item.type}"
					th:if="${status.index == resultList.![type].indexOf(item.type)}"
					onclick="hideTypeDiv(this.innerText); setActive(this)"></a>
			</li>
		</ul>
	</div>

	<div class="row">
		<div class="col-xl-4 col-lg-4 col-sm-12 p-5 typeDiv" th:attr="data-type=${item.type}"
			th:each="item, index : ${resultList}">
			<div class="card card-info">
				<div class="card-header ui-sortable-handle" style="cursor: move;">
					<h3 class="card-title" th:text="${item.type}"></h3>
					<div class="card-tools">
						<button type="button" class="btn btn-tool" data-card-widget="remove">
							<i class="fas fa-times"></i>
						</button>
					</div>
				</div>
				<form class="form-horizontal">
					<div class="card-body">
						<p th:utext="${item.summary}">
						</p>
					</div>
					<div class="card-footer">
						<a style="color: white;" th:href="${item.url}" type="button" target="_blank" class="btn btn-info float-right">출처</a>
					</div>

				</form>
			</div>
		</div>

	</div>

	<!-- Modal -->
	<div class="modal fade modal-secondary" id="modal-xl" style="display: none;" aria-hidden="true">
		<form action="/mng/exam/result/score" method="POST">
			<div class="modal-dialog modal-dialog-cented modal-xl">
				<div class="modal-content bg-secondary">
					<div class="col-12 modal-header">
						<div class="col-6">
							<h4 id="modalTitle" style="white-space: pre;" class="col-12 modal-title"></h4>
						</div>
					</div>
					<div class="modal-body">
						<div class="container-fluid">
							<div class="row">
								<p class="p-5" id="modalPassage"></p>
								<h6>출처:&nbsp;</h6>
								<a style="color: black;" id="modalUrl"><p id="modalUrlP"></p></a>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">닫기</button>
					</div>
				</div>
			</div>
		</form>
	</div>
	<script>
		function hideTypeDiv(type, atag) {

			$('.typeDiv').each(function () {
				if ($(this).data('type') === type) {
					$(this).show();
				} else {
					$(this).hide();
				}
			});
		}
		function setActive(element) {
			$('.nav-link').removeClass('active'); // 모든 nav-link에서 active 클래스 제거
			$(element).addClass('active'); // 클릭한 요소에 active 클래스 추가
		}
		
		function modalUp(passage, title, url){
			$("#modalTitle").text(title);
			$("#modalPassage").text(passage);
			$("#modalUrl").attr('href',url);
			$("#modalUrl").text(url);
			
		}
		$(document).ready(function () {

		});

	</script>
</th:block>

</html>